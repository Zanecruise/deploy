# Guia de Deploy â€“ ScoreLab API v2

## ğŸ”§ PrÃ©-requisitos
- Node.js 18+
- MongoDB (local ou Atlas)
- Conta na Infura ou Web3Storage (para IPFS)
- Chave da Alchemy e Bitquery (opcional para dados on-chain)

## ğŸ“ Estrutura do Projeto

scorelab-api/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ engines/         # Sherlock, Sentinela, Mirror, P(x)
â”‚   â”œâ”€â”€ services/        # NFT Engine, GasMonitor
â”‚   â”œâ”€â”€ routes/          # Endpoints REST
â”‚   â”œâ”€â”€ utils/           # Regras de flags
â”‚   â””â”€â”€ index.js         # InicializaÃ§Ã£o da API
â”œâ”€â”€ config/
â”‚   â””â”€â”€ db.js            # ConexÃ£o Mongo
â”œâ”€â”€ .env
â”œâ”€â”€ .env.example
â”œâ”€â”€ package.json
â””â”€â”€ README.md

## ğŸ“¦ InstalaÃ§Ã£o

```bash
git clone https://github.com/foundlab/scorelab-api.git
cd scorelab-api
npm install
```

## âš™ï¸ ConfiguraÃ§Ã£o de Ambiente

```bash
cp .env.example .env
```

Preencha com seus dados reais:

```dotenv
PORT=3000
MONGO_URI=mongodb+srv://user:pass@cluster.mongodb.net/scorelab
JWT_SECRET=foundlab_secret_key
ALCHEMY_API_KEY=your_alchemy_key
BITQUERY_API_KEY=your_bitquery_key
IPFS_PROJECT_ID=your_project_id
IPFS_SECRET=your_project_secret
IPFS_ENDPOINT=https://ipfs.infura.io:5001
ENGINE_VERSION=v2.3.1
```

## ğŸš€ ExecuÃ§Ã£o Local

```bash
npm run dev
```

Base URL: http://localhost:3000

## â˜ï¸ Deploy via Railway (ou GCP/Vercel)

- Subir projeto como Node.js
- Adicionar variÃ¡veis do .env na interface
- MongoDB via Railway Add-on ou Atlas
- Configurar domÃ­nio: api.foundlab.cloud
- Ativar logs e limites de uso

## ğŸ“® Teste com Postman

Importe o arquivo: `Postman_Collection_ScoreLab_v2.json`
Endpoints disponÃ­veis:
- POST /analyze
- GET /score/:wallet
- GET /nft/:wallet
- POST /mint
- GET /flags

## ğŸ›¡ï¸ SeguranÃ§a
- JWT obrigatÃ³rio nas rotas POST (analyze e mint)
- Rate Limit automÃ¡tico via middleware
- Logs de auditoria por IP e anÃ¡lise

## ğŸ§ª Testes
- Simule carteiras com comportamento positivo ou de risco
- Forje flags localmente para testar respostas do score